<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Contact</title>
    <meta content="Wenzhe Piao" name="author" />
    <meta content="contact page of the cake website" name="description" />
    <meta content="cake,montreal,contact" name="keywords" />

    <!-- Favicons -->
    <link href="images/favicon.png" rel="icon">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Amatic+SC:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">

    <!-- bootstrap CSS Files -->
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.1/baguetteBox.min.css">
    <link rel="stylesheet" href="assets/css/Navbar-Centered-Brand-icons.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/Testimonials-images.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <!-- Template Main CSS File -->
    <link href="assets/css/contact.css" rel="stylesheet">
</head>

<body>
    <main id="main">
        <!-- ======= Contact Section ======= -->
        <section id="contact" class="contact">
            <div class="container">

                <div class="section-header">
                    <p>Besoin d'aide?<span>Nous contacter</span></p>
                </div>

                <div>
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2796.9444792446234!2d-73.64550518393703!3d45.49106277910132!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4cc919def102d84f%3A0xd9ce8f6a22ec042!2s6363%20Trans%20Island%20Ave%2C%20Montreal%2C%20QC%20H3W%203B7!5e0!3m2!1sen!2sca!4v1657742056895!5m2!1sen!2sca"
                        width="100%" height="350" style="border:0;" allowfullscreen="" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div><!-- End Google Maps -->

                <div class="row gy-4">

                    <div class="col-md-6">
                        <div class="info-item  d-flex align-items-center">
                            <i class="icon bi bi-map flex-shrink-0"></i>
                            <div>
                                <h3>Notre adresse</h3>
                                <p>6363 Ave Trans Island, Montréal, Canada, H3W 3B7</p>
                            </div>
                        </div>
                    </div><!-- End Info Item -->

                    <div class="col-md-6">
                        <div class="info-item d-flex align-items-center">
                            <i class="icon bi bi-envelope flex-shrink-0"></i>
                            <div>
                                <h3>Envoyez-nous un email</h3>
                                <p>info@cakeartbyjames.com</p>
                            </div>
                        </div>
                    </div><!-- End Info Item -->

                    <div class="col-md-6">
                        <div class="info-item  d-flex align-items-center">
                            <i class="icon bi bi-telephone flex-shrink-0"></i>
                            <div>
                                <h3>Appelez-nous</h3>
                                <p>+1 514-430-1995</p>
                            </div>
                        </div>
                    </div><!-- End Info Item -->

                    <div class="col-md-6">
                        <div class="info-item  d-flex align-items-center">
                            <i class="icon bi bi-share flex-shrink-0"></i>
                            <div>
                                <h3>Horaires d'ouvertures</h3>
                                <div><strong>Du mardi au dimanche :</strong> 8h00 - 20h00 ;
                                    <strong>Lundi :</strong> Fermé 
                                </div>
                            </div>
                        </div>
                    </div><!-- End Info Item -->

                </div>

                <form role="form" class="email-form p-3 p-md-4" id="ContactSendMsgForm">
                    <div class="row">
                        <div class="col-xl-6 form-group">
                            <input type="text" name="name" class="form-control" id="name" placeholder="votre nom"
                                required>
                        </div>
                        <div class="col-xl-6 form-group">
                            <input type="email" class="form-control" name="email" id="email" placeholder="Votre e-mail"
                                required>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" name="subject" id="subject" placeholder="Matière"
                            required>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" name="message" rows="5" placeholder="Message"
                            required></textarea>
                    </div>
                    <div class="text-center"><button type="submit">Envoyer le message</button></div>
                </form>
                <!--End Contact Form -->
            </div>
            <!-- Modal -->
            <script>
                const contactForm = document.getElementById("ContactSendMsgForm");
                // Add 'submit' event handler
                contactForm.addEventListener("submit", function (event) {
                    event.preventDefault();
                    sendMessage();
                });

                function sendMessage() {
                    console.log('start sending message');

                    let form = contactForm;
                    let inputs = form.getElementsByTagName("input");
                    let msg = form.getElementsByTagName("textarea");

                    let data = {
                        name: inputs['name'].value,
                        email: inputs['email'].value,
                        subject: inputs['subject'].value,
                        message: msg[0].value
                    }

                    const url = "contact_fr.json"
                    let xhr = new XMLHttpRequest()

                    xhr.open('GET', url, true)
                    xhr.setRequestHeader('Content-type', 'application/json; charset=UTF-8')
                    xhr.send(JSON.stringify(data));

                    xhr.onload = function () {
                        if (xhr.status === 200) {
                            console.log("Post successfully created!")
                            let myModal = new bootstrap.Modal(document.getElementById('contactSendMsgModal'), {});

                            let responseJson = JSON.parse(xhr.responseText);
                            document.getElementById("sendMsgModalBody").textContent = responseJson.message;


                            myModal.show();
                        }
                    }
                }
            </script>
            <div class="modal fade " id="contactSendMsgModal" tabindex="-1" aria-labelledby="sendMsgModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-body" id="sendMsgModalBody">
                        </div>
                    </div>
                </div>
            </div>
        </section><!-- End Contact Section -->

    </main>

    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.1/baguetteBox.min.js"></script>
    <script src="assets/js/Lightbox-Gallery.js"></script>
</body>

</html>